<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Joe's Hotdog Stand - Version 2</title>
    <style type="text/css">
        h1 { text-align: center; }
        #order-summary { background-color: #d6b326; padding: 15px; }
    </style>
</head>
<body>
    <h1>Joe's Hotdog Stand</h1>
    <div id="order-summary"></div>

    <script>
        alert("JOE'S HOTDOG STAND - MENU\n\n" +
              "Hotdogs: $5.25 each\n" +
              "French Fries: $3.75 each\n" +
              "Drinks: $2.50 each\n\n" +
              "SPECIALS:\n" +
              "Joe's Meal Deal: $10 (1 hot dog + 1 fries + 1 drink)\n" +
              "10% discount on orders of $30 or more (before tax)");

        var prices = { "hotdog": 5.25, "french fries": 3.75, "drink": 2.50 };
        var quantities = {};
        var items = ["hotdog", "french fries", "drink"];

        var i;
        var item;
        var prompttext;
        var answer;
        for (i = 0; i < items.length; i++) {
            item = items[i];
            if (item === "french fries") {
                prompttext = "How many fries do you want?";
            } else {
                if (item === "hotdog") {
                    prompttext = "How many hotdogs do you want?";
                } else {
                    prompttext = "How many drinks do you want?";
                }
            }
            answer = prompt(prompttext, "0");
            quantities[item] = parseInt(answer, 10);
            if (isNaN(quantities[item])) {
                quantities[item] = 0;
            }
        }

        const MEAL_DEAL_PRICE = 10;
        const MEAL_DEAL_SAVINGS = (prices["hotdog"] + prices["french fries"] + prices["drink"]) - MEAL_DEAL_PRICE;
        const DISCOUNT_THRESHOLD = 30;
        const DISCOUNT_RATE = 0.10;
        const TAX_RATE = 0.0625;

        function showMoney(num) {
            var rounded = Math.round(num * 100) / 100;
            var dollars = Math.floor(rounded);
            var cents = Math.round((rounded - dollars) * 100);
            if (cents >= 100) {
                dollars = dollars + 1;
                cents = 0;
            }
            if (cents < 10) {
                return dollars + ".0" + cents;
            } else {
                return dollars + "." + cents;
            }
        }

        var numdogs = quantities["hotdog"];
        var numfries = quantities["french fries"];
        var numsoda = quantities["drink"];

        var mealdeals = numdogs;
        if (numfries < mealdeals) mealdeals = numfries;
        if (numsoda < mealdeals) mealdeals = numsoda;

        var subtotalbeforediscount = (numdogs * prices["hotdog"]) + (numfries * prices["french fries"]) + (numsoda * prices["drink"]);
        subtotalbeforediscount = subtotalbeforediscount - (mealdeals * MEAL_DEAL_SAVINGS);

        var hotdogitemcost = mealdeals * (MEAL_DEAL_PRICE / 3) + (numdogs - mealdeals) * prices["hotdog"];
        var friesitemcost = mealdeals * (MEAL_DEAL_PRICE / 3) + (numfries - mealdeals) * prices["french fries"];
        var drinkitemcost = mealdeals * (MEAL_DEAL_PRICE / 3) + (numsoda - mealdeals) * prices["drink"];
        var itemcosts = {};
        itemcosts["hotdog"] = hotdogitemcost;
        itemcosts["french fries"] = friesitemcost;
        itemcosts["drink"] = drinkitemcost;

        var discountamount = 0;
        if (subtotalbeforediscount >= DISCOUNT_THRESHOLD) {
            discountamount = Math.round(subtotalbeforediscount * DISCOUNT_RATE * 100) / 100;
        }
        var subtotalafterdiscount = subtotalbeforediscount - discountamount;

        var taxamount = Math.round(subtotalafterdiscount * TAX_RATE * 100) / 100;
        var finaltotal = subtotalafterdiscount + taxamount;

        var output = "<h2>Order Summary</h2>";
        var displayname;
        for (i = 0; i < items.length; i++) {
            item = items[i];
            if (item === "hotdog" || item === "drink") {
                displayname = item + "(s)";
            } else {
                displayname = item;
            }
            output = output + "<p><strong>" + quantities[item] + " " + displayname + ":</strong> $" + showMoney(itemcosts[item]) + "</p>";
        }
        output = output + "<p><strong>Subtotal (before discount):</strong> $" + showMoney(subtotalbeforediscount) + "</p>";
        if (discountamount > 0) {
            output = output + "<p><strong>10% Discount:</strong> -$" + showMoney(discountamount) + "</p>";
        }
        output = output + "<p><strong>Subtotal (after discount):</strong> $" + showMoney(subtotalafterdiscount) + "</p>";
        output = output + "<p><strong>MA Meals Tax (6.25%):</strong> $" + showMoney(taxamount) + "</p>";
        output = output + "<p><strong>Final Total:</strong> $" + showMoney(finaltotal) + "</p>";

        document.getElementById("order-summary").innerHTML = output;
    </script>
</body>
</html>
